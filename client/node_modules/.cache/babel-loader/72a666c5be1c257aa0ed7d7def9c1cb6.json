{"ast":null,"code":"var _jsxFileName = \"/Users/tanjain/MY/Learning/bookmyshow-app/client/src/BookTicket/BookTicket.container.js\";\nimport React, { Component } from \"react\";\nimport BookTicketComponent from \"./BookTicket.component\";\nimport config from \"../config.json\";\n\nclass BookTicket extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      maxSeatBookingCount: 0,\n      bookedSeats: [],\n      seatLayout: []\n    };\n    this.bookTicketClickHandler = this.bookTicketClickHandler.bind(this);\n    this.singleSeatClickHandler = this.singleSeatClickHandler.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(\"booking: componentDidMount\");\n    let seatLayouttemp = [];\n    let rowName = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"];\n\n    for (let r = 0; r < this.props.selectedEventDetails.hall.total_rows; r++) {\n      for (let c = 1; c < this.props.selectedEventDetails.hall.total_columns; c++) {\n        seatLayouttemp.push(\"\".concat(rowName[r]).concat(c));\n      }\n\n      seatLayouttemp.push(\"\");\n    }\n\n    this.props.selectedEventDetails.booked_seat.forEach(e1 => seatLayouttemp.forEach((e2, i) => {\n      if (e1 == e2) {\n        seatLayouttemp[i] = \"\".concat(e2, \":booked\");\n      }\n    }));\n    this.setState({\n      seatLayout: seatLayouttemp\n    });\n  } // shouldComponentUpdate() {\n  //   if (this.state.bookedSeats.length === 0) {\n  //     return false;\n  //   }\n  // }\n\n\n  bookingSeatCountChangeHandler(count) {\n    this.setState({\n      maxSeatBookingCount: count\n    });\n  }\n\n  bookTicketClickHandler() {\n    console.log(\"im clicked to book final tickets\");\n    console.log(this.state.bookedSeats);\n\n    try {\n      fetch(\"\".concat(config.apiUrl, \"/api/events/shows/\").concat(this.props.selectedEventDetails.show_id), {\n        method: \"PATCH\",\n        body: JSON.stringify({\n          booked_seat: this.state.bookedSeats\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => response.json()).then(response => {\n        console.log(response);\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  singleSeatClickHandler(seat) {\n    console.log(seat);\n    console.log(this.state.seatLayout);\n\n    for (const i = 0; i < this.state.seatLayout.length; i++) {\n      if (this.state.seatLayout[i] === seat) {\n        this.setState(previousState => {\n          seatLayout: [];\n\n          previousState.seatLayout[i].splice(i, 1, \"\".concat(seat, \":booked\"));\n        });\n      }\n    }\n\n    seat = \"\".concat(seat, \":booked\");\n    this.setState(previousState => ({\n      bookedSeats: [...previousState.bookedSeats, seat]\n    }));\n  }\n\n  element_replace() {\n    var ele = Array(10, 20, 300, 40, 50);\n    ele[ele.map((x, i) => [i, x]).filter(x => x[1] == 300)[0][0]] = 30;\n    console.log(ele);\n  }\n\n  render() {\n    console.log(\"booking container: render\");\n    console.log(this.state.bookedSeats);\n    return React.createElement(BookTicketComponent, {\n      totalRows: this.props.selectedEventDetails.hall.total_rows,\n      totalRows: this.props.selectedEventDetails.hall.total_columns,\n      showDate: this.props.selectedEventDetails.show_date,\n      showTime: this.props.selectedEventDetails.show_time,\n      bookTicketClickHandler: this.bookTicketClickHandler,\n      singleSeatClickHandler: this.singleSeatClickHandler,\n      seatLayout: this.state.seatLayout,\n      bookedSeats: this.state.bookedSeats,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    });\n  }\n\n}\n\nBookTicket.defaultProps = {};\nexport default BookTicket;","map":{"version":3,"sources":["/Users/tanjain/MY/Learning/bookmyshow-app/client/src/BookTicket/BookTicket.container.js"],"names":["React","Component","BookTicketComponent","config","BookTicket","constructor","props","state","maxSeatBookingCount","bookedSeats","seatLayout","bookTicketClickHandler","bind","singleSeatClickHandler","componentDidMount","console","log","seatLayouttemp","rowName","r","selectedEventDetails","hall","total_rows","c","total_columns","push","booked_seat","forEach","e1","e2","i","setState","bookingSeatCountChangeHandler","count","fetch","apiUrl","show_id","method","body","JSON","stringify","headers","then","response","json","err","seat","length","previousState","splice","element_replace","ele","Array","map","x","filter","render","show_date","show_time","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport BookTicketComponent from \"./BookTicket.component\";\nimport config from \"../config.json\";\n\nclass BookTicket extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      maxSeatBookingCount: 0,\n      bookedSeats: [],\n      seatLayout: []\n    };\n    this.bookTicketClickHandler = this.bookTicketClickHandler.bind(this);\n    this.singleSeatClickHandler = this.singleSeatClickHandler.bind(this);\n  }\n  componentDidMount() {\n    console.log(\"booking: componentDidMount\");\n    let seatLayouttemp = [];\n    let rowName = [\n      \"A\",\n      \"B\",\n      \"C\",\n      \"D\",\n      \"E\",\n      \"F\",\n      \"G\",\n      \"H\",\n      \"I\",\n      \"J\",\n      \"K\",\n      \"L\",\n      \"M\",\n      \"N\",\n      \"O\",\n      \"P\",\n      \"Q\",\n      \"R\",\n      \"S\",\n      \"T\",\n      \"U\",\n      \"V\",\n      \"W\",\n      \"X\",\n      \"Y\",\n      \"Z\"\n    ];\n    for (let r = 0; r < this.props.selectedEventDetails.hall.total_rows; r++) {\n      for (\n        let c = 1;\n        c < this.props.selectedEventDetails.hall.total_columns;\n        c++\n      ) {\n        seatLayouttemp.push(`${rowName[r]}${c}`);\n      }\n      seatLayouttemp.push(\"\");\n    }\n\n    this.props.selectedEventDetails.booked_seat.forEach(e1 =>\n      seatLayouttemp.forEach((e2, i) => {\n        if (e1 == e2) {\n          seatLayouttemp[i] = `${e2}:booked`;\n        }\n      })\n    );\n\n    this.setState({ seatLayout: seatLayouttemp });\n  }\n\n  // shouldComponentUpdate() {\n  //   if (this.state.bookedSeats.length === 0) {\n  //     return false;\n  //   }\n  // }\n\n  bookingSeatCountChangeHandler(count) {\n    this.setState({\n      maxSeatBookingCount: count\n    });\n  }\n  bookTicketClickHandler() {\n    console.log(\"im clicked to book final tickets\");\n    console.log(this.state.bookedSeats);\n    try {\n      fetch(\n        `${config.apiUrl}/api/events/shows/${this.props.selectedEventDetails.show_id}`,\n        {\n          method: \"PATCH\",\n          body: JSON.stringify({ booked_seat: this.state.bookedSeats }),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      )\n        .then(response => response.json())\n        .then(response => {\n          console.log(response);\n        });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  singleSeatClickHandler(seat) {\n    console.log(seat);\n    console.log(this.state.seatLayout);\n\n    for (const i = 0; i < this.state.seatLayout.length; i++) {\n      if (this.state.seatLayout[i] === seat) {\n        this.setState(previousState => {\n          seatLayout: [];\n          previousState.seatLayout[i].splice(i, 1, `${seat}:booked`);\n        });\n      }\n    }\n\n    seat = `${seat}:booked`;\n    this.setState(previousState => ({\n      bookedSeats: [...previousState.bookedSeats, seat]\n    }));\n  }\n\n  element_replace() {\n    var ele = Array(10, 20, 300, 40, 50);\n\n    ele[ele.map((x, i) => [i, x]).filter(x => x[1] == 300)[0][0]] = 30;\n\n    console.log(ele);\n  }\n\n  render() {\n    console.log(\"booking container: render\");\n    console.log(this.state.bookedSeats);\n    return (\n      <BookTicketComponent\n        totalRows={this.props.selectedEventDetails.hall.total_rows}\n        totalRows={this.props.selectedEventDetails.hall.total_columns}\n        showDate={this.props.selectedEventDetails.show_date}\n        showTime={this.props.selectedEventDetails.show_time}\n        bookTicketClickHandler={this.bookTicketClickHandler}\n        singleSeatClickHandler={this.singleSeatClickHandler}\n        seatLayout={this.state.seatLayout}\n        bookedSeats={this.state.bookedSeats}\n      />\n    );\n  }\n}\nBookTicket.defaultProps = {};\nexport default BookTicket;\n"]},"metadata":{},"sourceType":"module"}